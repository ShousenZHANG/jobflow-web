# Jobflow ğŸš€

A production-minded job search command center: fetch roles, triage opportunities, tailor CV/cover letter, and export ready-to-send PDFs.

[English](#english) | [ä¸­æ–‡](#ä¸­æ–‡)

![Next.js](https://img.shields.io/badge/Next.js-16-black)
![React](https://img.shields.io/badge/React-19-149eca)
![TypeScript](https://img.shields.io/badge/TypeScript-5-3178c6)
![Prisma](https://img.shields.io/badge/Prisma-7-2d3748)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-Database-336791)
![Vercel](https://img.shields.io/badge/Deploy-Vercel-black)
![GitHub Actions](https://img.shields.io/badge/CI-GitHub_Actions-2088ff)
![Vitest](https://img.shields.io/badge/Test-Vitest-729b1b)
![License](https://img.shields.io/badge/License-Apache--2.0-blue)
<!-- AUTO_METRICS_BADGES_START -->
![API Routes](https://img.shields.io/badge/API_Routes-23-0ea5e9)
![API Handlers](https://img.shields.io/badge/API_Handlers-28-0284c7)
![Test Files](https://img.shields.io/badge/Test_Files-22-65a30d)
![Prisma Models](https://img.shields.io/badge/Prisma_Models-10-7c3aed)
![Server Modules](https://img.shields.io/badge/Server_Modules-19-334155)
![UI Pages](https://img.shields.io/badge/UI_Pages-6-0f766e)
<!-- Generated by: npm run readme:metrics -->
<!-- AUTO_METRICS_BADGES_END -->

## Table of Contents

- [English](#english)
- [ä¸­æ–‡](#ä¸­æ–‡)

## English

### Why Jobflow

Jobflow is designed as a real workflow system, not just an AI prompt demo.

- End-to-end pipeline: intake, review, status tracking, tailoring, and export
- Reliability by default: dedupe, tombstone filtering, guarded import paths
- Controllable AI: auto-generation + manual external-model import with strict checks
- Governance-ready prompts: versioned rules, activation, reset, skill-pack distribution
- Production output: Resume and Cover Letter PDF generation via LaTeX

### Recruiter-Facing Highlights

- Structured product surface: `jobs`, `fetch`, `resume`, `resume/rules`
- Multi-step master resume editor with preview + save workflow
- Prompt rule versioning and downloadable skill pack for external model workflows
- Resume/Cover generation API with fallback and source telemetry headers
- Strong data hygiene: unique key dedupe + deleted URL tombstones

### Key Technology Matrix (What is actually used)

| Area | Technology | Status | Where in Project |
|---|---|---|---|
| Frontend framework | Next.js 16 (App Router) | Active | `package.json`, `app/` |
| UI runtime | React 19 + TypeScript | Active | `package.json`, `app/`, `components/` |
| UI styling/components | Tailwind CSS v4, Radix UI, shadcn-style components, Framer Motion | Active | `package.json`, `components/` |
| Authentication | NextAuth (GitHub + Google) | Active | `auth.ts`, `app/api/auth/[...nextauth]/route.ts` |
| Data access layer | Prisma 7 | Active | `package.json`, `lib/server/prisma.ts`, `prisma/schema.prisma` |
| Database | PostgreSQL | Active | `prisma/schema.prisma` |
| DB platform adapter | Neon (`@prisma/adapter-neon`, `@neondatabase/serverless`) | Active | `package.json` |
| Cloud hosting | Vercel | Active (deployment target) | README deployment config + runtime assumptions |
| CI / automation | GitHub Actions | Active | `app/api/fetch-runs/[id]/trigger/route.ts`, workflow dispatch flow |
| External fetch engine | Python JobSpy fetcher | Active | `tools/fetcher`, fetch run APIs |
| AI provider | Gemini API | Active when key configured, safe fallback otherwise | `lib/server/ai/providers.ts`, `lib/server/ai/tailorApplication.ts` |
| Validation | Zod | Active | `app/api/**/route.ts`, `lib/server/ai/schema.ts` |
| Object storage | Vercel Blob | Optional/Active when token configured | `app/api/applications/manual-generate/route.ts` |
| PDF rendering | LaTeX compile pipeline | Active | `lib/server/latex/*`, `app/api/applications/*` |
| Testing | Vitest + Testing Library | Active | `test/`, `app/**/*.test.tsx`, `package.json` |
| Azure | Mentioned in historical design docs only | Not active in current runtime | `docs/plans/*` |

### Product Architecture

```mermaid
flowchart LR
  U[User] --> FE[Next.js App Router UI]
  FE --> API[Next.js API Routes]
  API --> DB[(PostgreSQL via Prisma)]
  FE --> AUTH[NextAuth]

  FE --> FR[Create FetchRun]
  FR --> GH[GitHub Actions]
  GH --> PY[Python JobSpy Fetcher]
  PY --> CFG[/fetch-runs/:id/config]
  PY --> IMP[/api/admin/import]
  PY --> UPD[/fetch-runs/:id/update]
  IMP --> DB

  FE --> AI[/applications/prompt + manual-generate/]
  AI --> GM[Gemini Provider]
  AI --> PDF[LaTeX Render + Compile]
  PDF --> BLOB[Vercel Blob Optional]
  PDF --> DL[PDF Download]
```

### Feature Modules

#### 1) Job Intake Pipeline
- Start fetches from `/fetch` (`FetchRun` lifecycle)
- Dispatch workflow jobs through GitHub Actions
- Pull config + push status from secured fetch-run endpoints
- Import with dedupe and tombstone safety

#### 2) Jobs Workspace
- Two-pane reading workflow for speed
- Filter/search/paginate and status transitions (`NEW`, `APPLIED`, `REJECTED`)
- Markdown JD rendering with highlighting

#### 3) Master Resume
- Step-based editor: basics, summary, experience, projects, education, skills
- Bullet-level editing with markdown emphasis
- Save and preview base resume profile

#### 4) Prompt Rules + Skill Pack
- Versioned templates, activate any version, restore defaults
- Download a global skill pack for external model prompting

#### 5) Tailoring + Export
- AI-generated resume/cover content with robust fallback
- Manual JSON import path with strict parse and `promptMeta` checks
- Evidence-grounding guardrails for newly added bullets
- PDF generation and optional persistent resume storage

### Project Structure

- `app/(marketing)` marketing pages
- `app/(auth)` auth pages
- `app/(app)` app shell (`jobs`, `fetch`, `resume`, `resume/rules`)
- `app/api` backend APIs
- `lib/server` domain services (AI, PDF, prompts, persistence)
- `prisma/schema.prisma` data schema
- `tools/fetcher` fetcher integration
- `test` tests

### Quick Start

```bash
npm install
npm run dev
```

Open `http://localhost:3000`

### Scripts

- `npm run dev` local development
- `npm run build` production build
- `npm run start` production server
- `npm run lint` lint
- `npm test` test once
- `npm run test:watch` test in watch mode

### Environment Variables

Create a `.env` in project root.

#### App + Auth
- `DATABASE_URL`
- `NEXTAUTH_SECRET` or `AUTH_SECRET`
- `NEXTAUTH_URL`
- `GOOGLE_CLIENT_ID`
- `GOOGLE_CLIENT_SECRET`
- `GITHUB_ID`
- `GITHUB_SECRET`

#### Fetch + Workflow
- `GITHUB_OWNER`
- `GITHUB_REPO`
- `GITHUB_TOKEN` (requires workflow scope)
- `GITHUB_WORKFLOW_FILE` (default: `jobspy-fetch.yml`)
- `GITHUB_REF` (default: `master`)
- `JOBFLOW_WEB_URL`
- `FETCH_RUN_SECRET`
- `IMPORT_SECRET`

#### AI + Files
- `GEMINI_API_KEY`
- `GEMINI_MODEL` (optional)
- `BLOB_READ_WRITE_TOKEN` (optional)

### Deployment

- Recommended stack: Vercel + Neon (PostgreSQL)
- Configure env vars in Vercel
- If deployed from subdirectory, set Root Directory to `jobflow`

### Troubleshooting

- `GITHUB_DISPATCH_FAILED`: verify workflow token permissions
- Low import count: increase `resultsWanted`/`hoursOld` or relax excludes
- `PROMPT_META_MISMATCH`: regenerate skill pack + fresh prompt

### License

Apache License 2.0. See `LICENSE` and `NOTICE`.

---

## ä¸­æ–‡

### é¡¹ç›®ç®€ä»‹

Jobflow æ˜¯é¢å‘çœŸå®æ±‚èŒæµç¨‹çš„äº§å“åŒ–ç³»ç»Ÿï¼šæŠ“å–èŒä½ã€ç­›é€‰è·Ÿè¿›ã€åŸºäº JD å®šåˆ¶ç®€å†/æ±‚èŒä¿¡ï¼Œå¹¶å¯¼å‡º PDFã€‚

- å…¨æµç¨‹é—­ç¯ï¼šä»èŒä½æŠ“å–åˆ°æŠ•é€’ææ–™äº§å‡º
- ç¨³å®šä¼˜å…ˆï¼šå»é‡ã€å¢“ç¢‘æœºåˆ¶ã€å®‰å…¨å¯¼å…¥
- AI å¯æ§ï¼šè‡ªåŠ¨ç”Ÿæˆ + æ‰‹åŠ¨å¯¼å…¥åŒè·¯å¾„
- è§„åˆ™å¯æ²»ç†ï¼šPrompt ç‰ˆæœ¬åŒ–ã€æ¿€æ´»ã€æ¢å¤é»˜è®¤
- ç»“æœå¯äº¤ä»˜ï¼šResume/Cover Letter PDF

### GitHub å±•ç¤ºé‡ç‚¹

- å…³é”®æŠ€æœ¯çŸ©é˜µï¼ˆä¸Šæ–‡è¡¨æ ¼ï¼‰æ¸…æ¥šæ ‡æ³¨â€œå·²ç”¨æŠ€æœ¯â€å’Œâ€œçŠ¶æ€â€
- æ¶æ„å›¾å±•ç¤ºæŠ“å–ã€AIã€PDFã€å­˜å‚¨é“¾è·¯
- æ¨¡å—åŒ–ç« èŠ‚ä¾¿äºæ‹›è˜æ–¹å¿«é€Ÿé˜…è¯»

### å…³é”®æŠ€æœ¯ä¸€è§ˆ

- å‰ç«¯ï¼šNext.js 16ã€React 19ã€TypeScriptã€Tailwind CSS v4ã€Radix UI
- åç«¯ï¼šNext.js API Routesã€Prisma 7ã€Zod
- æ•°æ®åº“ï¼šPostgreSQLï¼ˆNeon é€‚é…ï¼‰
- è®¤è¯ï¼šNextAuthï¼ˆGitHub + Googleï¼‰
- äº‘ä¸è‡ªåŠ¨åŒ–ï¼šVercelã€GitHub Actionsã€Python JobSpy
- AI ä¸å†…å®¹ï¼šGeminiã€React Markdownã€LaTeX
- å­˜å‚¨ï¼šVercel Blobï¼ˆå¯é€‰å¯ç”¨ï¼‰
- æµ‹è¯•ï¼šVitest + Testing Library
- Azureï¼šå½“å‰è¿è¡Œé“¾è·¯æœªå¯ç”¨ï¼Œä»…åœ¨å†å²è®¾è®¡æ–‡æ¡£ä¸­æåŠ

### å¿«é€Ÿå¼€å§‹

```bash
npm install
npm run dev
```

è®¿é—® `http://localhost:3000`

### è®¸å¯è¯

Apache License 2.0ï¼Œè§ `LICENSE` å’Œ `NOTICE`ã€‚
